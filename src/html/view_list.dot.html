{{~it :view}}
{{ var lang = mx.helpers.checkLanguage({obj:view,path:'data.title'}) ; }}
<li data-view_id="{{=view.id}}" class="mx-view-item shadow transparent mx-view-item-{{=view.type}} mx-sort-li-item">
  <input data-view_action_key="btn_toggle_view" data-view_action_target="{{=view.id}}" id="check_view_enable_{{=view.id}}" class="mx-view-item-checkbox" type="checkbox"/>
  <label class="mx-view-item-checkbox-label mx-pointer" for="check_view_enable_{{=view.id}}">
    <div class="fa fa-bars mx-sort-li-handle"></div>
    <span class="mx-view-item-title">
      {{?view.data.title}}
      {{=view.data.title[lang]}}
      {{?}}
    </span>
    <span class="mx-view-item-classes">{{=view.data.classes}},{{=view.type}}</span>
    <span class="mx-view-item-index">{{=mx.helpers.getDistinctIndexWords(view)}}</span>
    <div class="hint--bottom-left hint-medium mx-view-item-indicator" aria-label="{{=view.date_modified.substr(0,10)}}">
      <div class="fa fa-circle-thin mx-view-item-switch"></div>
    </div>
  </label>
  <div class="mx-view-item-options">
    <div class="float-left">
      {{?view.data.abstract \u0026\u0026 view.data.abstract[lang]}}
      <p class="mx-view-item-desc" id="view_text_{{=view.id}}">{{=view.data.abstract[lang]}}</p>
      {{?}}
    </div>
    <div>
      {{?view.type=='vt'}}
      {{ var rules = mx.helpers.path(view,'data.style.rules'); }}
      {{?rules \u0026\u0026 rules.length \u003e 0 }}
      <div class="mx-view-item-legend" id="check_view_legend_{{=view.id}}"></div>
      {{?}}
      {{?}}
      {{?view.type=='rt'}}
      <div class="mx-view-item-legend-raster" id="check_view_legend_{{=view.id}}"></div>
      {{?}}
    </div>
    <div>
      <div class="mx-controls-view">
        <ul class="mx-controls-ul">
          {{?view.type=='sm'}}
          <li class="mx-pointer hint--bottom-right" data-lang_key="btn_opt_start_story" data-lang_type="tooltip" data-view_action_key="btn_opt_start_story" data-view_action_target="{{=view.id}}">
            <div class="fa fa-play"></div>
          </li>
          {{?}}
          {{?view.type=='gj' \u007c\u007c view.type=='vt' }}
          <li class="mx-pointer hint--bottom-right" data-view_action_key="btn_opt_zoom_all" data-view_action_target="{{=view.id}}" data-lang_key="btn_opt_zoom_all" data-lang_type="tooltip">
            <div class="fa fa-search-minus"></div>
          </li>
          <li class="mx-pointer hint--bottom-right" data-lang_key="btn_opt_zoom_visible" data-lang_type="tooltip" data-view_action_key="btn_opt_zoom_visible" data-view_action_target="{{=view.id}}">
            <div class="fa fa-search-plus"></div>
          </li>
          <li class="mx-pointer hint--bottom-right" data-lang_key="btn_opt_reset" data-lang_type="tooltip" data-view_action_key="btn_opt_reset" data-view_action_target="{{=view.id}}">
            <div class="fa fa-undo"></div>
          </li>
          {{?}}
          <li class="mx-pointer hint--bottom-right" data-view_action_key="btn_opt_search" data-view_action_target="mx-search-tool-{{=view.id}}" data-lang_key="btn_opt_search" data-lang_type="tooltip">
            <div class="fa fa-cog"></div>
          </li>
          {{?view.type=='vt' }}
          <li class="mx-pointer hint--bottom-right" data-lang_key="btn_opt_meta" data-lang_type="tooltip" data-view_action_key="btn_opt_meta" data-view_action_handler="shiny" data-view_action_target="{{=view.id}}">
            <div class="fa fa-info-circle"></div>
          </li>
          <li class="mx-pointer hint--bottom-right" data-lang_key="btn_opt_download" data-lang_type="tooltip" data-view_action_key="btn_opt_download" data-view_action_handler="shiny" data-view_action_target="{{=view.id}}">
            <div class="fa fa-cloud-download"></div>
          </li>
          {{?}}
          {{?view.type == 'gj'}}
          <li class="mx-pointer hint--bottom-right" data-lang_key="btn_upload" data-lang_type="tooltip" data-view_action_key="btn_upload_geojson" data-view_action_handler="shiny" data-view_action_target="{{=view.id}}">
            <div class="fa fa-cloud-upload"></div>
          </li>
          <li class="mx-pointer hint--bottom-right" data-lang_key="btn_opt_delete_geojson" data-lang_type="tooltip" data-view_action_key="btn_opt_delete_geojson" data-view_action_target="{{=view.id}}">
            <div class="fa fa-trash-o"></div>
          </li>
          {{?}}
          <li class="mx-pointer hint--bottom-right" data-lang_key="btn_opt_screenshot" data-lang_type="tooltip" data-view_action_key="btn_opt_screenshot" data-view_action_target="{{=view.id}}">
            <div class="fa fa-camera"></div>
          </li>
          {{?view._edit}}
          <li class="mx-pointer hint--bottom-right" data-lang_key="btn_opt_edit_config" data-lang_type="tooltip" data-view_action_key="btn_opt_edit_config" data-view_action_handler="shiny" data-view_action_target="{{=view.id}}">
            <div class="fa fa-pencil"></div>
          </li>
          {{?view.type=='vt'}}
          {{?mx.helpers.path(view,'data.attribute.name')}}
          <li class="mx-pointer hint--bottom-right" data-lang_key="btn_opt_edit_style" data-lang_type="tooltip" data-view_action_key="btn_opt_edit_style" data-view_action_handler="shiny" data-view_action_target="{{=view.id}}">
            <div class="fa fa-paint-brush"></div>
          </li>
          <li class="mx-pointer hint--bottom-right" data-lang_key="btn_opt_edit_dashboard" data-lang_type="tooltip" data-view_action_key="btn_opt_edit_dashboard" data-view_action_handler="shiny" data-view_action_target="{{=view.id}}">
            <div class="fa fa-pie-chart"></div>
          </li>
          {{?}}
          {{?}}
          <li class="mx-pointer hint--bottom-right" data-lang_key="btn_opt_delete" data-lang_type="tooltip" data-view_action_key="btn_opt_delete" data-view_action_handler="shiny" data-view_action_target="{{=view.id}}">
            <div class="fa fa-trash-o"></div>
          </li>
          {{?}}
          {{?view.type == 'vt' \u007c\u007c view.type == 'rt' }}
          <li class="mx-pointer hint--bottom-right" data-lang_key="btn_opt_share" data-lang_type="tooltip" data-view_action_key="btn_opt_share" data-view_action_target="{{=view.id}}">
            <div class="fa fa-external-link"></div>
          </li>
          {{?}}
        </ul>
      </div>
    </div>
    <div id="mx-search-tool-{{=view.id}}" class="mx-hide">
      {{?view.type == 'vt' \u007c\u007c view.type == 'gj' }}
      {{?mx.helpers.path(view,'data.attribute.type') == 'string'}}
      <select data-search_box_for="{{=view.id}}" class="mx-search-box" multiple="TRUE"></select>
      {{?}}
      {{?mx.helpers.path(view,'data.attribute.type') == 'number'}}
      <div class="mx-slider-container">
        <div class="mx-slider-header">
          <div class="mx-slider-title" data-lang_key="btn_opt_numeric" data-lang_type="text"></div>
          <div class="mx-slider-dyn">
            <div class="mx-slider-dyn-min"></div>
            <div class="mx-slider-dyn-max"></div>
          </div>
        </div>
        <div class="mx-slider mx-slider-numeric" data-range_numeric_for="{{=view.id}}"></div>
        <div class="mx-slider-range">
          <div class="mx-slider-range-min">{{=view.data.attribute.min}}</div>
          <div class="mx-slider-range-max">{{=view.data.attribute.max}}</div>
        </div>
      </div>
      {{?}}
      {{ var prop = mx.helpers.path(view,'data.attribute.names'); }}
      {{ var vExt = mx.helpers.path(view,'data.period.extent'); }}
      {{?prop \u0026\u0026 prop.indexOf('mx_t0') \u003E -1 \u0026\u0026 vExt \u0026\u0026 vExt.min \u0026\u0026 vExt.max}}
      <div class="mx-slider-container">
        <div class="mx-slider-header">
          <div class="mx-slider-title" data-lang_key="btn_opt_date" data-lang_type="text"></div>
          <div class="mx-slider-dyn">
            <div class="mx-slider-dyn-min"></div>
            <div class="mx-slider-dyn-max"></div>
          </div>
        </div>
        <div class="mx-slider mx-slider-date" data-range_time_for="{{=view.id}}"></div>
        <div class="mx-slider-range">
          <div class="mx-slider-range-min">{{=mx.helpers.date(vExt.min*1000)}}</div>
          <div class="mx-slider-range-max">{{=mx.helpers.date(vExt.max*1000)}}</div>
        </div>
      </div>
      {{?}}
      {{?}}
      <div class="mx-slider-container">
        <div class="mx-slider-header">
          <div class="mx-slider-title" data-lang_key="btn_opt_transparency" data-lang_type="text"></div>
        </div>
        <div class="mx-slider mx-slider-numeric" data-transparency_for="{{=view.id}}"></div>
        <div class="mx-slider-range">
          <div class="mx-slider-range-min">0%</div>
          <div class="mx-slider-range-max">100%</div>
        </div>
      </div>
    </div>
  </div>
</li>
{{~}}
