webpackJsonp([35],{117:function(e,t,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){JSONEditor.defaults.resolvers.unshift(function(e){if("string"===e.type&&"textarea"===e.format&&e.options&&"ace"===e.options.editor)return"ace"}),JSONEditor.defaults.editors.ace=JSONEditor.defaults.editors.string.extend({refreshValue:function(){this.value=this.value||"",this.serialized=this.value},setValue:function(e,t,i){if((!this.template||i)&&(null===e||void 0===e?e="":"object"===(void 0===e?"undefined":n(e))?e=JSON.stringify(e):"string"!=typeof e&&(e=""+e),e!==this.serialized)){var o=this.sanitize(e);if(this.input.value!==o){this.value=o,this.ace_editor&&this.ace_editor.setValue(o);var a=i||this.getValue()!==e;this.refreshValue(),t?this.is_dirty=!1:"change"===this.jsoneditor.options.show_errors&&(this.is_dirty=!0),this.adjust_height&&this.adjust_height(this.input),this.onChange(a)}}},afterInputReady:function(){function e(e){var t;switch(e){case"html":t=i.e(39).then(i.bind(null,582));break;case"javascript":t=i.e(47).then(i.bind(null,585));break;default:t=i.e(49).then(i.bind(null,586))}return t}var t=this,n=this.options.language;t.options.hidden?t.theme.afterInputReady(t.input):i.e(40).then(i.bind(null,587)).then(function(t){return window.ace=t,Promise.all([e(n),i.e(48).then(i.bind(null,589)),i.e(38).then(i.bind(null,590))])}).then(function(e){t.ace_container=document.createElement("div"),t.ace_container.style.width="100%",t.ace_container.style.position="relative",t.input.parentNode.insertBefore(t.ace_container,t.input),t.input.style.display="none",t.ace_editor=window.ace.edit(t.ace_container),t.ace_editor.setValue(t.getValue()||""),t.ace_editor.getSession().setMode("ace/mode/"+n),t.ace_editor.getSession().selection.clearSelection(),t.ace_editor.setTheme("ace/theme/github"),t.ace_editor.setOptions({minLines:1,maxLines:1/0}),t.ace_editor.on("change",function(){var e=t.ace_editor.getValue()||"";t.value=e,t.refreshValue(),t.is_dirty=!0,t.onChange(!0)}),t.theme.afterInputReady(t.input);var i=document.createElement("div");if(!0===t.options.readOnly&&t.ace_editor.setReadOnly(!0),("javascript"==n||"json"==n)&&!0!==t.options.readOnly){var o=document.createElement("button");o.className="btn btn-info",o.innerHTML="tidy",o.addEventListener("click",function(){var i=e[2],n=t.ace_editor.getSession();new Promise(function(e,t){e(n.getValue()||"")}).then(function(e){return i(e)}).then(function(e){n.setValue(e)}).catch(function(e){mx.helpers.modal({id:"modalError",title:"Error",content:"<p>Error during tidy process :"+e})})}),i.appendChild(o)}if(t.options.htmlHelp){var a=mx.helpers.textToDom(t.options.htmlHelp),s=document.createElement("button");s.className="btn btn-info",s.innerHTML="help",s.addEventListener("click",function(){mx.helpers.modal({id:"modalHelp",title:"Map-x help",content:a})}),i.appendChild(s)}t.input.parentNode.insertBefore(i,t.ace_container)})},disable:function(){this.input.disabled=!0,this.ace_editor&&this.ace_editor.setReadOnly(!0),this._super()},enable:function(){this.always_disabled||(this.input.disabled=!1,this.ace_editor&&this.ace_editor.setReadOnly(!1)),this._super()},destroy:function(){this.ace_editor&&this.ace_editor.destroy()}})}()}});