webpackJsonp([42],{484:function(e,t,n){"use strict";function a(e){function t(t){var n=e.util.getContainerEditorElement(t);Array.prototype.slice.call(n.parentElement.querySelectorAll("."+a)).forEach(function(e){e.classList.remove(a)})}var a="medium-editor-dragover",i=e.Extension.extend({name:"fileDragging",allowedTypes:["image"],init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy";var n=e.target.classList?e.target:e.target.parentElement;t(n),"dragover"===e.type&&n.classList.add(a)},handleDrop:function(e){e.preventDefault(),e.stopPropagation(),this.base.selectElement(e.target);var n=this.base.exportSelection();if(n.start=n.end,this.base.importSelection(n),e.dataTransfer.files){var a=e.dataTransfer.files.item(0);this.isAllowedFile(a)&&a.type.match("image")&&this.insertImageFile(a)}t(e.target)},isAllowedFile:function(e){return this.allowedTypes.some(function(t){return!!e.type.match(t)})},insertImageFile:function(e){if("function"==typeof FileReader){var t=new FileReader;t.readAsDataURL(e),t.addEventListener("load",function(e){var t=(n(8),this.base.getSelectedParentElement()),a=new Image,i=document.createElement("p"),r=document.createElement("span"),s=window.mx.helpers.makeId(10);a.id=s,r.innerHTML="["+window.mx.helpers.getLanguage(["loading_img"])+" ]",i.appendChild(a),i.appendChild(r);var o=this.base;a.onload=function(){r.remove(),o.checkContentChanged(o.elements[0])},t.appendChild(i),Shiny.onInputChange("imageUpload",{img:e.target.result,id:s})}.bind(this))}}});e.extensions.fileDragging=i}Object.defineProperty(t,"__esModule",{value:!0}),t.addDragDropToMedium=a}});